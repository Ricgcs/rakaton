<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/Front/Imagens/logo.png">
    <link rel="stylesheet" href="/Front/Estilo/inicial.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <title>Inicial</title>
</head>
<body>
    <div id="header">
<a href="/Front/Telas/Escola/Cadastro.html">Cadastro_diretor</a>
<a href="/Front/Telas/Professor/loginProfessor.html">Login_professor</a>
<a href="/Front/Telas/Aluno/loginAluno.html">Login_aluno</a>
<a href="/Front/Telas/Escola/loginDiretor.html">Login diretor</a>
         
    </div>
    
    <div id="corpo">
<input type="text" placeholder="Nome" id="nome">
<input type="password" placeholder="Senha" id="senha">
<button id="logar">Logar</button>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", ()=>{
          if(!nome, !senha){
                alert("preencha todos os campos");
            }

    else{
            const button = document.getElementById("logar");
            button.addEventListener("click",async ()=>{
            const nome = document.getElementById("nome").value;
            const senha = document.getElementById("senha").value;
            const formData = {nome, senha}
            try
            {
                
            const response = await fetch("http://localhost:3000/diretor/logar",
                {
                method:"POST",
                headers: {'Content-Type': 'application/json'},
                body:JSON.stringify(formData),
                })

            const data = await response.json();
            const retorno = data.result;
            console.log(retorno);
            
            if(retorno == 1){
                localStorage.setItem("nome",nome)
                localStorage.setItem("senha",senha)
                window.location = "/Front/Telas/Escola/logado.html"
            }
            else{
                alert("Usuário não encontrado");
            }
            }

            catch(error)
            {
            console.log(error);
            }
        })
    }


        }) 

    </script>
</body>
</html>